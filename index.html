<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReturnsX - Effortless Return Solutions for All</title>
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        nav {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            letter-spacing: -0.5px;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            transition: opacity 0.3s;
        }

        .nav-links a:hover {
            opacity: 0.8;
        }

        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 140px 2rem 100px;
            text-align: center;
            margin-top: 60px;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            animation: fadeInUp 0.8s ease;
        }

        .hero p {
            font-size: 1.3rem;
            max-width: 800px;
            margin: 0 auto 2rem;
            opacity: 0.95;
            animation: fadeInUp 0.8s ease 0.2s both;
        }

        .cta-button {
            background: white;
            color: #667eea;
            padding: 1rem 2.5rem;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            animation: fadeInUp 0.8s ease 0.4s both;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .about-section {
            background: linear-gradient(to bottom, #f8f9ff, white);
            padding: 80px 2rem;
            text-align: center;
        }

        .about-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .about-content h2 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: #333;
        }

        .about-content p {
            font-size: 1.2rem;
            color: #666;
            line-height: 1.8;
        }

        .features {
            max-width: 1200px;
            margin: 0 auto;
            padding: 80px 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 3rem;
        }

        .feature-card {
            padding: 2rem;
            border-radius: 15px;
            background: white;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin-bottom: 1.5rem;
        }

        .feature-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #333;
        }

        .feature-card p {
            color: #666;
            line-height: 1.7;
        }

        .form-section {
            background: white;
            padding: 80px 2rem;
        }

        .form-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .custom-form {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            padding: 3rem;
        }

        .submit-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: transform 0.3s;
            margin-top: 1rem;
        }

        .submit-button:hover:not(:disabled) {
            transform: translateY(-2px);
        }

        .steps-section {
            background: #f8f9ff;
            padding: 80px 2rem;
        }

        .steps-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .steps-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            color: #333;
        }

        .steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .step {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            text-align: center;
            transition: transform 0.3s;
        }

        .step:hover {
            transform: translateY(-5px);
        }

        .step-number {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 0 auto 1.5rem;
        }

        .step h3 {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: #333;
        }

        .step p {
            color: #666;
            margin-bottom: 1rem;
        }

        footer {
            background: #2d3748;
            color: white;
            text-align: center;
            padding: 3rem 2rem;
            margin-top: 80px;
        }

        footer p {
            opacity: 0.8;
        }

        /* Admin Panel - Only visible to authorized users */
        .admin-panel {
            position: fixed;
            top: 80px;
            right: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            padding: 1.5rem;
            width: 350px;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 9999;
            font-size: 0.85rem;
            display: none;
        }

        .admin-panel.show {
            display: block;
        }

        .admin-panel h4 {
            margin-bottom: 1rem;
            color: #667eea;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .admin-login {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .admin-login input {
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .admin-login button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0.75rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
        }

        .session-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            max-height: 500px;
            overflow-y: auto;
        }

        .session-card {
            background: #f8f9ff;
            padding: 1rem;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .session-card:hover {
            transform: translateX(5px);
        }

        .session-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .session-stat {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #666;
            margin: 0.25rem 0;
        }

        .admin-toggle {
            position: fixed;
            top: 80px;
            right: 20px;
            background: #2d3748;
            color: white;
            border: none;
            border-radius: 10px;
            padding: 0.75rem 1rem;
            font-size: 0.9rem;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            z-index: 9998;
            transition: transform 0.3s;
            font-weight: 600;
        }

        .admin-toggle:hover {
            transform: scale(1.05);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }

            .hero p {
                font-size: 1.1rem;
            }

            .nav-links {
                display: none;
            }

            .steps {
                grid-template-columns: 1fr;
            }

            .custom-form {
                padding: 1.5rem;
            }

            .analytics-dashboard {
                bottom: 10px;
                right: 10px;
                left: 10px;
                max-width: none;
            }
        }
    </style>
</head>
<body>
    <!-- Admin Toggle Button (Hidden for regular users) -->
    <button class="admin-toggle" id="adminToggle" style="display: none;">ğŸ” Admin</button>

    <!-- Admin Panel (Only for authorized users) -->
    <div class="admin-panel" id="adminPanel">
        <div id="adminLogin" class="admin-login">
            <h4>ğŸ” Admin Access</h4>
            <input type="password" id="adminPassword" placeholder="Enter admin password">
            <button onclick="adminLogin()">Login</button>
            <p style="color: #999; font-size: 0.75rem; margin-top: 0.5rem;">Demo password: admin123</p>
        </div>
        
        <div id="adminContent" style="display: none;">
            <h4>ğŸ‘¥ User Sessions (<span id="sessionCount">0</span>)</h4>
            <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
                <button onclick="refreshSessions()" style="flex: 1; background: #48bb78; color: white; padding: 0.5rem 1rem; border: none; border-radius: 5px; cursor: pointer;">ğŸ”„ Refresh</button>
                <button onclick="exportAllSessions()" style="flex: 1; background: #667eea; color: white; padding: 0.5rem 1rem; border: none; border-radius: 5px; cursor: pointer;">ğŸ“¥ Export All</button>
                <button onclick="clearAllSessions()" style="flex: 1; background: #f56565; color: white; padding: 0.5rem 1rem; border: none; border-radius: 5px; cursor: pointer;">ğŸ—‘ï¸ Clear</button>
            </div>
            <div style="background: #f8f9ff; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                <div style="font-size: 0.75rem; color: #666;">
                    <div style="margin-bottom: 0.25rem;">ğŸŸ¢ <strong>Active:</strong> Updated within 30s</div>
                    <div style="margin-bottom: 0.25rem;">ğŸ”¥ <strong>Hot:</strong> High engagement (clicks + time)</div>
                    <div style="margin-bottom: 0.25rem;">ğŸŒ¡ï¸ <strong>Warm:</strong> Medium engagement</div>
                    <div>â„ï¸ <strong>Cool/Cold:</strong> Low engagement</div>
                </div>
            </div>
            <div class="session-list" id="sessionList">
                <p style="color: #999; text-align: center; padding: 2rem;">Loading sessions...</p>
            </div>
        </div>
    </div>

    <header>
        <nav>
            <div class="logo">ReturnsX</div>
            <ul class="nav-links">
                <li><a href="#about" data-nav="about">About</a></li>
                <li><a href="#features" data-nav="features">Features</a></li>
                <li><a href="#scan-form" data-nav="scan-form">Scan</a></li>
                <li><a href="#how-it-works" data-nav="how-it-works">How It Works</a></li>
                <li><a href="#contact" data-nav="contact">Contact</a></li>
            </ul>
        </nav>
    </header>

    <section class="hero">
        <h1>Effortless Return Solutions for All</h1>
        <p>Scan. Ship. Done.</p>
        <button class="cta-button" data-cta="hero-get-started" onclick="document.getElementById('scan-form').scrollIntoView({behavior: 'smooth'})">Get Started Now</button>
    </section>

    <section class="about-section" id="about">
        <div class="about-content">
            <h2>About ReturnsX</h2>
            <p>Manage returns from FedEx, UPS, and USPS in one powerful platform. Save time, skip the hassle. ReturnsX brings together all your shipping carriers in a single, easy-to-use interface designed to make returns effortless.</p>
        </div>
    </section>

    <section class="features" id="features">
        <div class="feature-card" data-feature="barcode-scanning">
            <div class="feature-icon">ğŸ“±</div>
            <h3>Barcode Scanning Returns</h3>
            <p>Effortlessly manage your returns with our intuitive barcode scanning technology. Simply scan and upload to get started.</p>
        </div>

        <div class="feature-card" data-feature="shipment-management">
            <div class="feature-icon">ğŸ“¦</div>
            <h3>Collated Shipment Management</h3>
            <p>Streamline your returns with our intelligent shipment collation system that works seamlessly across all major carriers.</p>
        </div>

        <div class="feature-card" data-feature="difficult-returns">
            <div class="feature-icon">ğŸ› ï¸</div>
            <h3>Difficult Return Handling</h3>
            <p>Expert assistance for your most challenging returns. We handle the complexity so you don't have to.</p>
        </div>
    </section>

    <section class="form-section" id="scan-form">
        <div class="form-container"> 
            <div class="custom-form" style="text-align: center; padding: 4rem 3rem;">
                <div style="font-size: 4rem; margin-bottom: 2rem;">ğŸ“‹</div>
                <h3 style="font-size: 1.8rem; margin-bottom: 1rem; color: #333;">Ready to Start Your Return?</h3>
                <p style="color: #666; font-size: 1.1rem; margin-bottom: 2.5rem; max-width: 600px; margin-left: auto; margin-right: auto;">
                    Click the button below to access our secure return form. You'll be able to upload images, documents, and provide all necessary details for your return.
                </p>
                
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSfsF7gBr-n2COemt5Ig2-zdVpg7Jy1fUpmDj26iJFF9C318Ng/viewform?usp=dialog" target="_blank" style="text-decoration: none;">
                    <button class="submit-button" data-cta="open-form" style="width: auto; padding: 1.25rem 3rem; display: inline-block;">
                        Open Return Form â†’
                    </button>
                </a>
                
                <p style="color: #999; font-size: 0.9rem; margin-top: 1.5rem;">
                    Opens in a new tab â€¢ Secure Google Form
                </p>
            </div>
        </div>
    </section>

    <section class="steps-section" id="how-it-works">
        <div class="steps-container">
            <h2 class="steps-title">How It Works</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3>Upload Your Barcode</h3>
                    <p>Enter or scan your barcode to get started. All barcodes are securely stored and accessible anytime.</p>
                </div>

                <div class="step">
                    <div class="step-number">2</div>
                    <h3>Choose Your Carrier</h3>
                    <p>Label your package and select from any of the top shipping carriers including FedEx, UPS, and USPS.</p>
                </div>

                <div class="step">
                    <div class="step-number">3</div>
                    <h3>Pack Your Item</h3>
                    <p>Securely pack your return item following our simple guidelines for safe shipping.</p>
                </div>

                <div class="step">
                    <div class="step-number">4</div>
                    <h3>Drop Off Your Package</h3>
                    <p>Drop off your package at your chosen carrier location easily and conveniently.</p>
                </div>
            </div>
        </div>
    </section>

    <footer id="contact">
        <p>&copy; 2024 ReturnsX. All rights reserved.</p>
        <p>Experience hassle-free returns like never before!</p>
    </footer>

    <script>
        // ========================================
        // ANALYTICS TRACKING SYSTEM
        // ========================================

        // Generate unique session ID
        const sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        
        const analytics = {
            sessionId: sessionId,
            pageLoadTime: Date.now(),
            timeOnPage: 0,
            scrollDepth: 0,
            maxScrollDepth: 0,
            ctaClicks: 0,
            navClicks: 0,
            featureHovers: new Set(),
            formClicks: 0,
            events: [],
            location: null,
            device: {
                userAgent: navigator.userAgent,
                viewport: {
                    width: window.innerWidth,
                    height: window.innerHeight
                },
                referrer: document.referrer
            }
        };

        // ========================================
        // LOCATION TRACKING
        // ========================================
        async function getLocationData() {
            try {
                // Using ipapi.co - free tier allows 1000 requests/day
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                
                analytics.location = {
                    ip: data.ip,
                    city: data.city,
                    region: data.region,
                    country: data.country_name,
                    countryCode: data.country_code,
                    timezone: data.timezone,
                    latitude: data.latitude,
                    longitude: data.longitude
                };
                
                console.log('ğŸ“ Location detected:', analytics.location);
                sendAnalyticsUpdate();
            } catch (error) {
                console.warn('Could not fetch location data:', error);
                analytics.location = { error: 'Unable to determine location' };
            }
        }

        // Get location on page load
        getLocationData();

        // ========================================
        // SEND DATA TO SERVER/DATABASE
        // ========================================
        async function sendAnalyticsUpdate() {
            const data = {
                ...analytics,
                featureHovers: Array.from(analytics.featureHovers),
                timestamp: new Date().toISOString(),
                lastUpdate: Date.now()
            };

            // DEMO MODE: Using localStorage to simulate a database
            // This acts as a "central database" that all users write to
            try {
                // Get all existing sessions from the "database"
                const allSessions = JSON.parse(localStorage.getItem('returnsx_sessions') || '{}');
                
                // Update or add this session
                allSessions[sessionId] = data;
                
                // Save back to "database"
                localStorage.setItem('returnsx_sessions', JSON.stringify(allSessions));
                
                console.log('âœ… Analytics sent to database');
                
                /* 
                ============================================
                PRODUCTION CODE - Replace everything above with:
                ============================================
                
                await fetch('https://your-backend.com/api/analytics', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-API-Key': 'your-secret-api-key'
                    },
                    body: JSON.stringify(data)
                });
                
                ============================================
                BACKEND STRUCTURE (Node.js/Express example):
                ============================================
                
                // Store in MongoDB, PostgreSQL, Firebase, etc.
                app.post('/api/analytics', async (req, res) => {
                    const session = req.body;
                    
                    // Save to database
                    await db.collection('sessions').updateOne(
                        { sessionId: session.sessionId },
                        { $set: session },
                        { upsert: true }
                    );
                    
                    res.json({ success: true });
                });
                
                // Admin endpoint to get all sessions
                app.get('/api/analytics/sessions', async (req, res) => {
                    // Verify admin authentication
                    if (req.headers.authorization !== 'Bearer YOUR_ADMIN_TOKEN') {
                        return res.status(401).json({ error: 'Unauthorized' });
                    }
                    
                    // Get all sessions from database
                    const sessions = await db.collection('sessions')
                        .find({})
                        .sort({ pageLoadTime: -1 })
                        .toArray();
                    
                    res.json(sessions);
                });
                
                ============================================
                */
            } catch (error) {
                console.error('âŒ Error sending analytics:', error);
            }
        }

        // Send updates every 10 seconds (real-time tracking)
        setInterval(sendAnalyticsUpdate, 10000);

        // Send immediately on first load
        setTimeout(sendAnalyticsUpdate, 2000);

        // Send on page exit
        window.addEventListener('beforeunload', () => {
            // Use sendBeacon for reliable delivery even when page is closing
            const data = {
                ...analytics,
                featureHovers: Array.from(analytics.featureHovers),
                timestamp: new Date().toISOString(),
                lastUpdate: Date.now()
            };
            
            // Final update before leaving
            const allSessions = JSON.parse(localStorage.getItem('returnsx_sessions') || '{}');
            allSessions[sessionId] = data;
            localStorage.setItem('returnsx_sessions', JSON.stringify(allSessions));
            
            /* In production, use:
            navigator.sendBeacon('https://your-backend.com/api/analytics', 
                JSON.stringify(data)
            );
            */
        });

        // Track event
        function trackEvent(eventType, eventData) {
            const event = {
                type: eventType,
                timestamp: Date.now() - analytics.pageLoadTime,
                data: eventData
            };
            analytics.events.push(event);
            console.log('ğŸ“Š Event Tracked:', event);
            
            // Send update after important events
            if (['cta_click', 'scroll_milestone'].includes(eventType)) {
                sendAnalyticsUpdate();
            }
        }

        // ========================================
        // 1. TIME ON PAGE TRACKING
        // ========================================
        setInterval(() => {
            analytics.timeOnPage = Math.floor((Date.now() - analytics.pageLoadTime) / 1000);
        }, 1000);

        // ========================================
        // 2. SCROLL DEPTH TRACKING
        // ========================================
        let scrollTimeout;
        window.addEventListener('scroll', () => {
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(() => {
                const windowHeight = window.innerHeight;
                const documentHeight = document.documentElement.scrollHeight;
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                
                analytics.scrollDepth = Math.round((scrollTop / (documentHeight - windowHeight)) * 100);
                
                if (analytics.scrollDepth > analytics.maxScrollDepth) {
                    analytics.maxScrollDepth = analytics.scrollDepth;
                    
                    // Track milestone scrolls
                    if (analytics.maxScrollDepth >= 25 && !analytics.scroll25) {
                        analytics.scroll25 = true;
                        trackEvent('scroll_milestone', { depth: 25 });
                    }
                    if (analytics.maxScrollDepth >= 50 && !analytics.scroll50) {
                        analytics.scroll50 = true;
                        trackEvent('scroll_milestone', { depth: 50 });
                    }
                    if (analytics.maxScrollDepth >= 75 && !analytics.scroll75) {
                        analytics.scroll75 = true;
                        trackEvent('scroll_milestone', { depth: 75 });
                    }
                    if (analytics.maxScrollDepth >= 90 && !analytics.scroll90) {
                        analytics.scroll90 = true;
                        trackEvent('scroll_milestone', { depth: 90 });
                    }
                }
            }, 100);
        });

        // ========================================
        // 3. CTA BUTTON CLICK TRACKING
        // ========================================
        document.querySelectorAll('[data-cta]').forEach(button => {
            button.addEventListener('click', (e) => {
                const ctaId = e.currentTarget.getAttribute('data-cta');
                analytics.ctaClicks++;
                
                if (ctaId === 'open-form') {
                    analytics.formClicks++;
                }
                
                trackEvent('cta_click', {
                    ctaId: ctaId,
                    text: e.currentTarget.textContent.trim(),
                    timeOnPage: analytics.timeOnPage
                });
            });
        });

        // Track navigation clicks
        document.querySelectorAll('[data-nav]').forEach(link => {
            link.addEventListener('click', (e) => {
                const navId = e.currentTarget.getAttribute('data-nav');
                analytics.navClicks++;
                
                trackEvent('nav_click', {
                    section: navId,
                    timeOnPage: analytics.timeOnPage
                });
            });
        });

        // ========================================
        // 4. HOVER EVENT TRACKING
        // ========================================
        document.querySelectorAll('[data-feature]').forEach(card => {
            let hoverStartTime;
            let hasTrackedHover = false;
            
            card.addEventListener('mouseenter', (e) => {
                hoverStartTime = Date.now();
                const featureId = e.currentTarget.getAttribute('data-feature');
                
                if (!analytics.featureHovers.has(featureId)) {
                    analytics.featureHovers.add(featureId);
                }
            });
            
            card.addEventListener('mouseleave', (e) => {
                if (hoverStartTime) {
                    const hoverDuration = Date.now() - hoverStartTime;
                    const featureId = e.currentTarget.getAttribute('data-feature');
                    
                    if (hoverDuration > 500 && !hasTrackedHover) {
                        hasTrackedHover = true;
                        trackEvent('feature_hover', {
                            feature: featureId,
                            duration: hoverDuration,
                            timeOnPage: analytics.timeOnPage
                        });
                    }
                }
            });
        });

        // Track step card hovers
        document.querySelectorAll('.step').forEach((step, index) => {
            let hoverStartTime;
            
            step.addEventListener('mouseenter', () => {
                hoverStartTime = Date.now();
            });
            
            step.addEventListener('mouseleave', () => {
                if (hoverStartTime) {
                    const hoverDuration = Date.now() - hoverStartTime;
                    if (hoverDuration > 500) {
                        trackEvent('step_hover', {
                            stepNumber: index + 1,
                            duration: hoverDuration,
                            timeOnPage: analytics.timeOnPage
                        });
                    }
                }
            });
        });

        // ========================================
        // ADMIN PANEL FUNCTIONALITY
        // ========================================
        const ADMIN_PASSWORD = 'admin123'; // Change this to your secure password
        let isAdmin = false;

        // Check if admin access is already granted (stored in sessionStorage)
        if (sessionStorage.getItem('adminAccess') === 'true') {
            isAdmin = true;
            showAdminPanel();
        }

        // Show admin toggle button on specific key combination (Ctrl+Shift+A)
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.shiftKey && e.key === 'A') {
                document.getElementById('adminToggle').style.display = 'block';
            }
        });

        document.getElementById('adminToggle').addEventListener('click', () => {
            const panel = document.getElementById('adminPanel');
            panel.classList.toggle('show');
        });

        function adminLogin() {
            const password = document.getElementById('adminPassword').value;
            
            if (password === ADMIN_PASSWORD) {
                isAdmin = true;
                sessionStorage.setItem('adminAccess', 'true');
                showAdminPanel();
                loadSessions();
            } else {
                alert('Incorrect password');
            }
        }

        function showAdminPanel() {
            document.getElementById('adminLogin').style.display = 'none';
            document.getElementById('adminContent').style.display = 'block';
            document.getElementById('adminToggle').style.display = 'block';
        }

        function loadSessions() {
            // DEMO MODE: Load from localStorage
            const allSessions = JSON.parse(localStorage.getItem('returnsx_sessions') || '{}');
            
            /* PRODUCTION CODE - Replace above with:
            
            fetch('https://your-backend.com/api/analytics/sessions', {
                headers: {
                    'Authorization': 'Bearer YOUR_ADMIN_TOKEN'
                }
            })
            .then(res => res.json())
            .then(sessions => {
                displaySessions(sessions);
            });
            
            */
            
            displaySessions(allSessions);
        }

        function displaySessions(allSessions) {
            const sessionList = document.getElementById('sessionList');
            const sessionCount = document.getElementById('sessionCount');
            
            // Convert object to array and sort by most recent
            const sessions = Object.values(allSessions).sort((a, b) => b.pageLoadTime - a.pageLoadTime);
            sessionCount.textContent = sessions.length;
            
            if (sessions.length === 0) {
                sessionList.innerHTML = '<p style="color: #999; text-align: center; padding: 2rem;">No sessions yet. Waiting for visitors...</p>';
                return;
            }
            
            sessionList.innerHTML = sessions.map((session, index) => {
                const location = session.location ? 
                    `${session.location.city || 'Unknown'}, ${session.location.country || 'Unknown'}` : 
                    'Fetching location...';
                
                const engagement = calculateEngagement(session);
                const isActive = (Date.now() - (session.lastUpdate || session.pageLoadTime)) < 30000; // Active if updated in last 30s
                
                return `
                    <div class="session-card" onclick='showSessionDetail(${JSON.stringify(session).replace(/'/g, "&#39;")})'>
                        <div class="session-header">
                            <span>ğŸ“ ${location}</span>
                            <span style="color: ${engagement.color}">${engagement.label}</span>
                        </div>
                        ${isActive ? '<div style="background: #48bb78; color: white; padding: 0.25rem 0.5rem; border-radius: 5px; font-size: 0.7rem; display: inline-block; margin-bottom: 0.5rem;">ğŸŸ¢ ACTIVE NOW</div>' : ''}
                        <div class="session-stat">
                            <span>Session ID:</span>
                            <span style="font-size: 0.7rem; color: #999;">${session.sessionId.substring(0, 20)}...</span>
                        </div>
                        <div class="session-stat">
                            <span>Time:</span>
                            <span><strong>${session.timeOnPage}s</strong></span>
                        </div>
                        <div class="session-stat">
                            <span>Scroll:</span>
                            <span><strong>${session.maxScrollDepth}%</strong></span>
                        </div>
                        <div class="session-stat">
                            <span>CTA Clicks:</span>
                            <span><strong>${session.ctaClicks}</strong></span>
                        </div>
                        <div class="session-stat">
                            <span>Form Clicks:</span>
                            <span><strong>${session.formClicks}</strong></span>
                        </div>
                        <div class="session-stat">
                            <span>Events:</span>
                            <span><strong>${session.events.length}</strong></span>
                        </div>
                        <div style="font-size: 0.7rem; color: #999; margin-top: 0.5rem;">
                            Started: ${new Date(session.pageLoadTime).toLocaleString()}
                        </div>
                        ${session.lastUpdate ? `<div style="font-size: 0.7rem; color: #999;">Last Update: ${new Date(session.lastUpdate).toLocaleTimeString()}</div>` : ''}
                    </div>
                `;
            }).join('');
        }

        function calculateEngagement(session) {
            let score = 0;
            
            if (session.timeOnPage > 30) score += 2;
            if (session.timeOnPage > 60) score += 2;
            if (session.maxScrollDepth > 50) score += 2;
            if (session.maxScrollDepth > 75) score += 2;
            if (session.ctaClicks > 0) score += 3;
            if (session.formClicks > 0) score += 4;
            
            if (score >= 10) return { label: 'Hot ğŸ”¥', color: '#f56565' };
            if (score >= 6) return { label: 'Warm ğŸŒ¡ï¸', color: '#ed8936' };
            if (score >= 3) return { label: 'Cool â„ï¸', color: '#4299e1' };
            return { label: 'Cold ğŸ§Š', color: '#a0aec0' };
        }

        function showSessionDetail(session) {
            const detail = `
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              SESSION DETAIL REPORT                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ†” Session ID: ${session.sessionId}

ğŸ“ LOCATION INFORMATION:
   City:         ${session.location?.city || 'Unknown'}
   Region:       ${session.location?.region || 'Unknown'}
   Country:      ${session.location?.country || 'Unknown'}
   Country Code: ${session.location?.countryCode || 'Unknown'}
   Timezone:     ${session.location?.timezone || 'Unknown'}
   IP Address:   ${session.location?.ip || 'Unknown'}
   Coordinates:  ${session.location?.latitude || '?'}, ${session.location?.longitude || '?'}

â±ï¸  ENGAGEMENT METRICS:
   Time on Page:      ${session.timeOnPage}s (${Math.floor(session.timeOnPage / 60)}m ${session.timeOnPage % 60}s)
   Max Scroll Depth:  ${session.maxScrollDepth}%
   CTA Clicks:        ${session.ctaClicks}
   Form Clicks:       ${session.formClicks}
   Nav Clicks:        ${session.navClicks}
   Feature Hovers:    ${session.featureHovers ? session.featureHovers.length : 0}
   ${session.featureHovers && session.featureHovers.length > 0 ? `Hovered Features: ${session.featureHovers.join(', ')}` : ''}

ğŸ“± DEVICE INFORMATION:
   Viewport:    ${session.device.viewport.width}x${session.device.viewport.height}
   User Agent:  ${session.device.userAgent}
   Referrer:    ${session.device.referrer || 'Direct (no referrer)'}

ğŸ“… TIMING:
   Page Load:   ${new Date(session.pageLoadTime).toLocaleString()}
   Last Update: ${session.lastUpdate ? new Date(session.lastUpdate).toLocaleString() : 'N/A'}
   Timestamp:   ${session.timestamp || 'N/A'}

ğŸ¯ USER EVENTS (${session.events.length} total):
${session.events.length === 0 ? '   No events recorded yet.' : session.events.map((e, i) => {
    const timeStr = Math.floor(e.timestamp/1000);
    const eventData = JSON.stringify(e.data || {});
    return `   ${i + 1}. [${timeStr}s] ${e.type} ${eventData !== '{}' ? eventData : ''}`;
}).join('\n')}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            `;
            
            console.log(detail);
            
            // Also create a downloadable report
            const blob = new Blob([detail], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            
            // Ask user if they want to download
            if (confirm('Session details logged to console.\n\nWould you like to download a full report?')) {
                const a = document.createElement('a');
                a.href = url;
                a.download = `session-${session.sessionId.substring(0, 15)}-${Date.now()}.txt`;
                a.click();
            }
        }

        function refreshSessions() {
            loadSessions();
            console.log('ğŸ”„ Sessions refreshed');
        }

        function exportAllSessions() {
            const allSessions = JSON.parse(localStorage.getItem('returnsx_sessions') || '{}');
            const sessions = Object.values(allSessions);
            
            // Create detailed CSV export
            const csv = [
                ['Session ID', 'Start Time', 'Time on Page (s)', 'Max Scroll %', 'CTA Clicks', 'Form Clicks', 'Nav Clicks', 'Feature Hovers', 'City', 'Region', 'Country', 'IP', 'Referrer', 'Viewport', 'Events Count', 'Engagement'].join(','),
                ...sessions.map(s => {
                    const engagement = calculateEngagement(s);
                    return [
                        s.sessionId,
                        new Date(s.pageLoadTime).toISOString(),
                        s.timeOnPage,
                        s.maxScrollDepth,
                        s.ctaClicks,
                        s.formClicks,
                        s.navClicks,
                        (s.featureHovers || []).length,
                        s.location?.city || '',
                        s.location?.region || '',
                        s.location?.country || '',
                        s.location?.ip || '',
                        s.device?.referrer || 'Direct',
                        `${s.device?.viewport?.width}x${s.device?.viewport?.height}`,
                        s.events.length,
                        engagement.label
                    ].join(',');
                })
            ].join('\n');
            
            // Download CSV
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `returnsx-all-sessions-${Date.now()}.csv`;
            a.click();
            
            // Also download JSON for full detail
            const jsonBlob = new Blob([JSON.stringify(sessions, null, 2)], { type: 'application/json' });
            const jsonUrl = URL.createObjectURL(jsonBlob);
            const jsonA = document.createElement('a');
            jsonA.href = jsonUrl;
            jsonA.download = `returnsx-all-sessions-${Date.now()}.json`;
            
            if (confirm('CSV exported! Would you also like the full JSON export with all event details?')) {
                jsonA.click();
            }
            
            console.log(`ğŸ“¥ Exported ${sessions.length} sessions`);
        }

        function clearAllSessions() {
            if (confirm(`âš ï¸ Are you sure you want to delete ALL ${Object.keys(JSON.parse(localStorage.getItem('returnsx_sessions') || '{}')).length} sessions?\n\nThis cannot be undone!`)) {
                if (confirm('Really delete? This is your last chance!')) {
                    localStorage.setItem('returnsx_sessions', '{}');
                    loadSessions();
                    console.log('ğŸ—‘ï¸ All sessions cleared');
                    alert('âœ… All sessions have been deleted');
                }
            }
        }

        // Auto-refresh sessions every 15 seconds when admin panel is open
        setInterval(() => {
            if (isAdmin && document.getElementById('adminPanel').classList.contains('show')) {
                loadSessions();
                console.log('ğŸ”„ Auto-refresh: Sessions updated');
            }
        }, 15000);

        console.log('ğŸ“Š Analytics System Active');
        console.log('ğŸ” Admin Panel: Press Ctrl+Shift+A to access');
        console.log('ğŸ’¡ Session ID:', sessionId);
        console.log('ğŸ“ All user data is being logged to centralized database');
        console.log('');
        console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
        console.log('ğŸš€ PRODUCTION DEPLOYMENT CHECKLIST:');
        console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
        console.log('1. Replace localStorage with real database API calls');
        console.log('2. Set up backend server (Node.js/Python/etc)');
        console.log('3. Change ADMIN_PASSWORD to a secure value');
        console.log('4. Add proper authentication (JWT tokens recommended)');
        console.log('5. Set up database (MongoDB, PostgreSQL, Firebase, etc)');
        console.log('6. Optional: Add real-time websocket updates');
        console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
    </script>
</body>
</html>
